{
  "openapi": "3.0.0",
  "info": {
    "version": "1.0.0",
    "title": "Kirilovi-08 API",
    "description": "API for different types of E-Commerce WebSites",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "tags": [
    {
      "name": "Products",
      "description": "Individual Products CRUD operations"
    },
    {
      "name": "Employee",
      "description": "CRUD with Employees Data"
    },
    {
      "name": "File",
      "description": "Insert/Export data"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:4567",
      "description": "Local API"
    },
    {
      "url": "https://web-api-be.herokuapp.com/store",
      "description": "Internal Production"
    }
  ],
  "components": {
    "securitySchemes": {
      "TokenAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "Authorization"
      },
      "WebSiteAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "WebSite"
      },
      "SiteIDAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "SiteData"
      }
    },
    "schemas": {
      "ProductDTO": {
        "type": "object",
        "required": [
          "_id",
          "name",
          "siteID",
          "categoryID"
        ],
        "properties": {
          "_id": {
            "type": "string",
            "uniqueItems": true
          },
          "categoryID": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "pack": {
            "type": "string"
          },
          "sort": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "sizes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "price": {
            "type": "number"
          },
          "discount": {
            "type": "number"
          },
          "imgURL": {
            "type": "string"
          },
          "iconURL": {
            "type": "string"
          },
          "details": {
            "type": "string"
          },
          "quantity": {
            "type": "number"
          }
        },
        "xml": {
          "name": "ProductDTO"
        }
      },
      "ProductListDTO": {
        "type": "object",
        "required": [
          "siteID",
          "categoryID"
        ],
        "properties": {
          "currentPage": {
            "type": "number",
            "default": 1
          },
          "perPage": {
            "type": "number",
            "default": 15
          },
          "sort": {
            "type": "string",
            "default": "name_property"
          },
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "_id": {
                  "type": "string",
                  "uniqueItems": true
                },
                "categoryID": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "pack": {
                  "type": "string"
                },
                "sort": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "sizes": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "price": {
                  "type": "number"
                },
                "discount": {
                  "type": "number"
                },
                "imgURL": {
                  "type": "string"
                },
                "iconURL": {
                  "type": "string"
                },
                "details": {
                  "type": "string"
                },
                "quantity": {
                  "type": "number"
                }
              }
            }
          },
          "companies": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "EmployeeDTO": {
        "type": "object",
        "required": [
          "_id",
          "firstname",
          "lastname",
          "password"
        ],
        "properties": {
          "_id": {
            "type": "string",
            "uniqueItems": true
          },
          "siteID": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "firstname": {
            "type": "string"
          },
          "lastname": {
            "type": "string"
          },
          "company": {
            "type": "string"
          },
          "levelAuth": {
            "type": "string"
          },
          "created": {
            "type": "string"
          },
          "lastLogin": {
            "type": "string"
          },
          "personalDiscount": {
            "type": "number"
          },
          "address": {
            "country": {
              "type": "string"
            },
            "town": {
              "type": "string"
            },
            "postcode": {
              "type": "string"
            },
            "adderess": {
              "type": "string"
            },
            "address1": {
              "type": "string"
            },
            "phone": {
              "type": "string"
            }
          }
        },
        "xml": {
          "name": "EmployeeDTO"
        }
      },
      "EmployeeListDTO": {
        "type": "object",
        "required": [
          "siteID",
          "categoryID"
        ],
        "properties": {
          "currentPage": {
            "type": "number",
            "default": 1
          },
          "perPage": {
            "type": "number",
            "default": 15
          },
          "sort": {
            "type": "string",
            "default": "name_property"
          },
          "results": {
            "type": "object",
            "required": [
              "_id",
              "firstname",
              "lastname",
              "password"
            ],
            "properties": {
              "_id": {
                "type": "string",
                "uniqueItems": true
              },
              "siteID": {
                "type": "string"
              },
              "email": {
                "type": "string"
              },
              "firstname": {
                "type": "string"
              },
              "lastname": {
                "type": "string"
              },
              "company": {
                "type": "string"
              },
              "levelAuth": {
                "type": "string"
              },
              "created": {
                "type": "date"
              },
              "lastLogin": {
                "type": "date"
              },
              "personalDiscount": {
                "type": "number"
              },
              "address": {
                "country": {
                  "type": "string"
                },
                "town": {
                  "type": "string"
                },
                "postcode": {
                  "type": "string"
                },
                "adderess": {
                  "type": "string"
                },
                "address1": {
                  "type": "string"
                },
                "phone": {
                  "type": "string"
                }
              }
            },
            "xml": {
              "name": "EmployeeDTO"
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "TokenAuth": []
    },
    {
      "SiteIDAuth": []
    },
    {
      "WebSiteAuth": []
    }
  ],
  "paths": {
    "/products": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Pagination all products",
        "description": "Data can be filtered by Category or/and containing ProductName substring. Data can be sort by each property with descending or ascending data direction",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "post": {
        "tags": [
          "Products"
        ],
        "summary": "Add new product",
        "description": "",
        "responses": {
          "200": {
            "description": "New product wwas inserted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        }
      },
      "delete": {
        "tags": [
          "Products"
        ],
        "summary": "Delete Products by Category or Web Site",
        "description": "By specifing the categoryID, all connected products will be deleted. Or skipping the property data will remove all products connected with the website",
        "responses": {
          "200": {
            "description": "Were deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          }
        }
      }
    },
    "/products/:id": {
      "get": {
        "tags": [
          "Products"
        ],
        "summary": "Take product by productID",
        "description": "Return product object",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "put": {
        "tags": [
          "Products"
        ],
        "summary": "Product details update by productID",
        "description": "",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "patch": {
        "tags": [
          "Products"
        ],
        "summary": "Partial product data update by productID",
        "description": "",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/ProductDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "delete": {
        "tags": [
          "Products"
        ],
        "summary": "Delete Products by Category or Web Site",
        "description": "By specifing the categoryID, all connected products will be deleted. Or skipping the property data will remove all products connected with the website",
        "responses": {
          "200": {
            "description": "Were deleted successfully"
          }
        }
      }
    },
    "/files/import": {
      "post": {
        "tags": [
          "File"
        ],
        "summary": "Insert Data from a file",
        "description": "Insert data to the Database from a Excel files '.xlsx' and '.csv'. All files must contain ['name', 'price', 'quantity'] columns. All extra columns will be added as well to the Database!!!",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "base64"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "X number of records were added to the Product table"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      }
    },
    "/files/export": {
      "post": {
        "tags": [
          "File"
        ],
        "summary": "Export DB Data to a json file",
        "description": "Export DB Data to a json file. Data can be filtered by All, Date, Category",
        "responses": {
          "200": {
            "description": "X number of records are stored into a json file and it`s ready for downloading"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      }
    },
    "/employees": {
      "get": {
        "tags": [
          "Employee"
        ],
        "summary": "Pagination all employees",
        "description": "Data can be filtered by employeeName and/or email substrings. Data can be sort by each property with descending or ascending data direction",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeListDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeListDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "post": {
        "tags": [
          "Employee"
        ],
        "summary": "Add new employee",
        "description": "",
        "responses": {
          "200": {
            "description": "New employee was added",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          }
        }
      },
      "delete": {
        "tags": [
          "Employee"
        ],
        "summary": "Delete all employees",
        "description": "Äll employes connected to selected website will be removed",
        "responses": {
          "200": {
            "description": "X employees were removed from the database 'successfully'",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          }
        }
      }
    },
    "/employees/:id": {
      "get": {
        "tags": [
          "Employee"
        ],
        "summary": "Take employee by ID",
        "description": "Returns data for selected employee",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "put": {
        "tags": [
          "Employee"
        ],
        "summary": "Update employee details by ID",
        "description": "",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "patch": {
        "tags": [
          "Employee"
        ],
        "summary": "To update partial employee data",
        "description": "",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "application/xml": {
                "schema": {
                  "$ref": "#/components/schemas/EmployeeDTO"
                }
              },
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "404 Not Found"
          }
        }
      },
      "delete": {
        "tags": [
          "Employee"
        ],
        "summary": "Delete selected employee",
        "description": "By providing the employee id, all records connected to it will be removed from the database",
        "responses": {
          "200": {
            "description": "Employee_data was deleted successfully"
          }
        }
      }
    }
  }
}